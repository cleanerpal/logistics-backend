import{b as D,c as V}from"./chunk-LDLE5TDT.js";import{a as G}from"./chunk-FL7UC7QU.js";import{a as L,b as O,c as k,f as B,h as N}from"./chunk-OFY7VGJP.js";import{b as T,c as q,f as R,i as j}from"./chunk-P7ITNQJW.js";import{a as K,b as Q}from"./chunk-HDC6EVXZ.js";import{b as W}from"./chunk-Q2NIOR5G.js";import{C as A,E as U,H as z,I as H,J,b as x,d as c,g as S,h as y,l as w,o as I,q as P,u as E,w as F}from"./chunk-E6Y7ME2X.js";import"./chunk-ZO4V6NUC.js";import{a as C}from"./chunk-M4BJXN77.js";import{a as _,c as M}from"./chunk-4PPYA6ZN.js";import{j as b}from"./chunk-3O2P3FIP.js";import{Bb as h,Cb as m,Lb as t,Mb as i,Nb as p,Vb as g,db as o,fc as n,gc as v,ib as d,pb as f,vb as u}from"./chunk-NXWLSP6D.js";import"./chunk-RA2WU32H.js";function Y(r,a){r&1&&(t(0,"mat-error"),n(1," Email is required "),i())}function Z(r,a){r&1&&(t(0,"mat-error"),n(1," Please enter a valid email address "),i())}function $(r,a){r&1&&(t(0,"mat-error"),n(1," Password is required "),i())}function ee(r,a){r&1&&(t(0,"mat-error"),n(1," Password must be at least 6 characters "),i())}function te(r,a){r&1&&p(0,"mat-spinner",14)}function ie(r,a){r&1&&(t(0,"span"),n(1,"Login"),i())}var X=class r{constructor(a,l,e,s,re){this.formBuilder=a;this.firebaseService=l;this.router=e;this.route=s;this.snackBar=re;this.loginForm=this.formBuilder.group({email:["",[c.required,c.email]],password:["",[c.required,c.minLength(6)]]})}loginForm;loading=!1;hidePassword=!0;returnUrl="/dashboard";ngOnInit(){this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/dashboard"}get f(){return this.loginForm.controls}onSubmit(){if(this.loginForm.invalid)return;this.loading=!0;let a=this.f.email.value,l=this.f.password.value;this.firebaseService.emailLogin(a,l).then(()=>{this.router.navigate([this.returnUrl])}).catch(e=>{let s="Login failed. Please try again.";e.code==="auth/user-not-found"||e.code==="auth/wrong-password"?s="Invalid email or password":e.code==="auth/too-many-requests"&&(s="Too many unsuccessful login attempts. Please try again later."),this.snackBar.open(s,"Close",{duration:5e3,panelClass:["error-snackbar"]}),this.loading=!1})}static \u0275fac=function(l){return new(l||r)(d(E),d(C),d(M),d(_),d(W))};static \u0275cmp=f({type:r,selectors:[["app-login"]],decls:31,vars:12,consts:[[1,"login-container"],[1,"logo-container"],["src","assets/logo.png","alt","NI Vehicle Logistics Logo",1,"login-logo"],[1,"app-title"],[1,"login-card"],[1,"login-form",3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","type","email","formControlName","email","placeholder","Enter your email"],["matSuffix",""],[4,"ngIf"],["matInput","","formControlName","password","placeholder","Enter your password",3,"type"],["type","button","mat-icon-button","","matSuffix","",3,"click"],["mat-raised-button","","color","primary","type","submit",1,"login-button",3,"disabled"],["diameter","20",4,"ngIf"],["diameter","20"]],template:function(l,e){l&1&&(t(0,"div",0)(1,"div",1),p(2,"img",2),i(),t(3,"h1",3),n(4,"NI Vehicle Logistics"),i(),t(5,"mat-card",4)(6,"mat-card-header")(7,"mat-card-title"),n(8,"Log In"),i()(),t(9,"mat-card-content")(10,"form",5),g("ngSubmit",function(){return e.onSubmit()}),t(11,"mat-form-field",6)(12,"mat-label"),n(13,"Email"),i(),p(14,"input",7),t(15,"mat-icon",8),n(16,"email"),i(),u(17,Y,2,0,"mat-error",9)(18,Z,2,0,"mat-error",9),i(),t(19,"mat-form-field",6)(20,"mat-label"),n(21,"Password"),i(),p(22,"input",10),t(23,"button",11),g("click",function(){return e.hidePassword=!e.hidePassword}),t(24,"mat-icon"),n(25),i()(),u(26,$,2,0,"mat-error",9)(27,ee,2,0,"mat-error",9),i(),t(28,"button",12),u(29,te,1,0,"mat-spinner",13)(30,ie,2,0,"span",9),i()()()()()),l&2&&(o(10),m("formGroup",e.loginForm),o(7),m("ngIf",e.f.email.hasError("required")),o(),m("ngIf",e.f.email.hasError("email")),o(4),m("type",e.hidePassword?"password":"text"),o(),h("aria-label","Hide password")("aria-pressed",e.hidePassword),o(2),v(e.hidePassword?"visibility_off":"visibility"),o(),m("ngIf",e.f.password.hasError("required")),o(),m("ngIf",e.f.password.hasError("minlength")),o(),m("disabled",e.loginForm.invalid||e.loading),o(),m("ngIf",e.loading),o(),m("ngIf",!e.loading))},dependencies:[b,F,w,x,S,y,I,P,N,L,k,B,O,G,j,T,q,R,V,D,z,U,A,J,H,Q,K],styles:[".login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background-color:var(--background-color);padding:16px}.logo-container[_ngcontent-%COMP%]{margin-bottom:16px}.login-logo[_ngcontent-%COMP%]{height:80px;max-width:100%}.app-title[_ngcontent-%COMP%]{font-size:24px;font-weight:500;color:var(--secondary-color);margin-bottom:32px;text-align:center}.login-card[_ngcontent-%COMP%]{width:100%;max-width:400px;border-radius:8px;box-shadow:0 4px 20px #0000001a}.mat-card-header[_ngcontent-%COMP%]{margin-bottom:16px}.mat-card-title[_ngcontent-%COMP%]{font-size:20px;color:var(--secondary-color)}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.login-button[_ngcontent-%COMP%]{margin-top:16px;height:46px;font-size:16px;background-color:var(--primary-color)}.login-button[_ngcontent-%COMP%]:disabled{background-color:#0000001f}.mat-spinner[_ngcontent-%COMP%]{margin:0 auto}.error-snackbar[_ngcontent-%COMP%]{background-color:var(--error-color);color:#fff}@media (max-width: 480px){.login-card[_ngcontent-%COMP%]{max-width:100%}}"]})};export{X as LoginComponent};
