import"./chunk-F5X5MWHG.js";import{a as S,b as ue}from"./chunk-VWFB2ZCV.js";import{a as de,b as pe}from"./chunk-6ZM5HFJH.js";import{b as te,c as ie}from"./chunk-LDLE5TDT.js";import"./chunk-DJMXPRNS.js";import"./chunk-U5UIMM6O.js";import"./chunk-PP7BOOB7.js";import{a as ee}from"./chunk-FL7UC7QU.js";import{a as w,b as fe,c as he}from"./chunk-RGR4672A.js";import{a as _e,b as ge,c as Ce,d as ve,e as xe,f as Me,g as be,h as Se,i as we,j as Ve,k as ye,l as ke,m as Te}from"./chunk-HITQB7VJ.js";import"./chunk-DQFV6XNM.js";import{a as U,c as Y,h as K}from"./chunk-OFY7VGJP.js";import{b as W,f as X,i as Z}from"./chunk-P7ITNQJW.js";import{a as ce,b as me}from"./chunk-HDC6EVXZ.js";import{b as se}from"./chunk-Q2NIOR5G.js";import{C as ne,E as oe,H as re,I as ae,J as le,b as $,g as j,h as Q,l as G,o as z,q as A,u as q,w as J}from"./chunk-E6Y7ME2X.js";import"./chunk-ZO4V6NUC.js";import{c as O,g as F}from"./chunk-4PPYA6ZN.js";import{ga as I,ia as R,j as P,ka as B,o as D,ra as N,ta as H,ua as L}from"./chunk-3O2P3FIP.js";import{$b as V,Cb as s,Lb as n,Mb as o,Nb as M,Ob as d,Pb as p,Rb as b,Vb as _,Wb as g,ac as y,bc as k,db as c,fc as r,gc as f,ib as x,pa as C,pb as T,pc as E,qa as v,vb as m}from"./chunk-NXWLSP6D.js";import"./chunk-RA2WU32H.js";var Pe=()=>[10,25,50];function De(e,t){if(e&1){let i=b();n(0,"button",14),_("click",function(){C(i);let a=g();return v(a.resetFilter())}),n(1,"mat-icon"),r(2,"close"),o()()}}function Oe(e,t){e&1&&(n(0,"div",15),M(1,"mat-spinner",16),o())}function Fe(e,t){e&1&&(n(0,"th",33),r(1,"Registration"),o())}function Ie(e,t){if(e&1&&(n(0,"td",34),r(1),o()),e&2){let i=t.$implicit;c(),f(i.registration)}}function Re(e,t){e&1&&(n(0,"th",33),r(1,"Make"),o())}function Be(e,t){if(e&1&&(n(0,"td",34),r(1),o()),e&2){let i=t.$implicit;c(),f(i.make)}}function Ne(e,t){e&1&&(n(0,"th",33),r(1,"Model"),o())}function He(e,t){if(e&1&&(n(0,"td",34),r(1),o()),e&2){let i=t.$implicit;c(),f(i.model)}}function Le(e,t){e&1&&(n(0,"th",33),r(1,"Type"),o())}function $e(e,t){if(e&1&&(n(0,"td",34),r(1),o()),e&2){let i=t.$implicit;c(),f(i.type)}}function je(e,t){e&1&&(n(0,"th",33),r(1,"Year"),o())}function Qe(e,t){if(e&1&&(n(0,"td",34),r(1),o()),e&2){let i=t.$implicit;c(),f(i.year)}}function Ge(e,t){e&1&&(n(0,"th",33),r(1," Current Location "),o())}function ze(e,t){if(e&1&&(n(0,"td",34),r(1),o()),e&2){let i=t.$implicit;c(),f(i.location)}}function Ae(e,t){e&1&&(n(0,"th",35),r(1,"Actions"),o())}function qe(e,t){if(e&1){let i=b();n(0,"td",34)(1,"button",36),_("click",function(a){let u=C(i).$implicit;return g(2).editVehicle(u.id),v(a.stopPropagation())}),n(2,"mat-icon"),r(3,"edit"),o()(),n(4,"button",37),_("click",function(a){let u=C(i).$implicit;return g(2).viewVehicleJobs(u.id),v(a.stopPropagation())}),n(5,"mat-icon"),r(6,"work"),o()()()}e&2&&(c(),s("matTooltip","Edit Vehicle"),c(3),s("matTooltip","View Jobs"))}function Je(e,t){e&1&&M(0,"tr",38)}function Ue(e,t){if(e&1){let i=b();n(0,"tr",39),_("click",function(){let a=C(i).$implicit,u=g(2);return v(u.editVehicle(a.id))}),o()}}function Ye(e,t){e&1&&(n(0,"tr",40)(1,"td",41),r(2," No vehicles found matching the search criteria "),o()())}function Ke(e,t){if(e&1&&(n(0,"div",17)(1,"table",18),d(2,19),m(3,Fe,2,0,"th",20)(4,Ie,2,1,"td",21),p(),d(5,22),m(6,Re,2,0,"th",20)(7,Be,2,1,"td",21),p(),d(8,23),m(9,Ne,2,0,"th",20)(10,He,2,1,"td",21),p(),d(11,24),m(12,Le,2,0,"th",20)(13,$e,2,1,"td",21),p(),d(14,25),m(15,je,2,0,"th",20)(16,Qe,2,1,"td",21),p(),d(17,26),m(18,Ge,2,0,"th",20)(19,ze,2,1,"td",21),p(),d(20,27),m(21,Ae,2,0,"th",28)(22,qe,7,2,"td",21),p(),m(23,Je,1,0,"tr",29)(24,Ue,1,0,"tr",30)(25,Ye,3,0,"tr",31),o(),M(26,"mat-paginator",32),o()),e&2){let i=g();c(),s("dataSource",i.dataSource),c(22),s("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),c(),s("matRowDefColumns",i.displayedColumns),c(2),s("pageSizeOptions",E(6,Pe))("pageSize",50)}}var Ee=class e{constructor(t,i,l,a){this.firestore=t;this.formBuilder=i;this.router=l;this.snackBar=a;this.searchForm=this.formBuilder.group({searchTerm:[""]})}dataSource=new Te;displayedColumns=["registration","make","model","type","year","location","actions"];searchForm;loading=!0;subscription;paginator;sort;ngOnInit(){this.loadVehicles(),this.searchForm.get("searchTerm")?.valueChanges.subscribe(t=>{this.applyFilter(t)})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}loadVehicles(){this.loading=!0;try{let t=B(this.firestore,"Vehicles"),i=L(t,H("make","asc"),N(50));this.subscription=R(i,{idField:"id"}).subscribe({next:l=>{this.dataSource.data=l,this.loading=!1,setTimeout(()=>{this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.dataSource.filterPredicate=(a,u)=>{let h=u.toLowerCase();return a.registration.toLowerCase().includes(h)||a.make.toLowerCase().includes(h)||a.model.toLowerCase().includes(h)||a.type.toLowerCase().includes(h)}})},error:l=>{console.error("Error loading vehicles:",l),this.snackBar.open("Error loading vehicles. Please try again.","Close",{duration:5e3,panelClass:["error-snackbar"]}),this.loading=!1}})}catch(t){console.error("Error setting up vehicles subscription:",t),this.snackBar.open("Error setting up subscription. Please try again.","Close",{duration:5e3,panelClass:["error-snackbar"]}),this.loading=!1}}applyFilter(t){t=t.trim().toLowerCase(),this.dataSource.filter=t,this.dataSource.paginator&&this.dataSource.paginator.firstPage()}editVehicle(t){this.router.navigate(["/vehicles/edit",t])}viewVehicleJobs(t){this.router.navigate(["/vehicles",t,"jobs"])}createVehicle(){this.router.navigate(["/vehicles/create"])}resetFilter(){this.searchForm.get("searchTerm")?.setValue("")}getStatusColor(t){switch(t){case"Available":return"#4CAF50";case"In Use":return"#2196F3";case"Maintenance":return"#FFC107";case"Out of Service":return"#F44336";default:return"#9E9E9E"}}static \u0275fac=function(i){return new(i||e)(x(I),x(q),x(O),x(se))};static \u0275cmp=T({type:e,selectors:[["app-vehicles"]],viewQuery:function(i,l){if(i&1&&(V(S,5),V(w,5)),i&2){let a;y(a=k())&&(l.paginator=a.first),y(a=k())&&(l.sort=a.first)}},decls:22,vars:4,consts:[[1,"vehicles-container"],[1,"page-header"],[1,"page-title"],[1,"header-actions"],["mat-raised-button","","color","primary",1,"create-button",3,"click"],[1,"filter-card"],[1,"filter-form",3,"formGroup"],[1,"search-container"],["appearance","outline"],["matInput","","formControlName","searchTerm","placeholder","Search by registration, make, or model..."],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix",""],["class","loading-container",4,"ngIf"],["class","table-container",4,"ngIf"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"loading-container"],["diameter","50"],[1,"table-container"],["mat-table","","matSort","",1,"vehicles-table",3,"dataSource"],["matColumnDef","registration"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","make"],["matColumnDef","model"],["matColumnDef","type"],["matColumnDef","year"],["matColumnDef","location"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","vehicle-row",3,"click",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of vehicles",3,"pageSizeOptions","pageSize"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-icon-button","","color","primary",3,"click","matTooltip"],["mat-icon-button","","color","accent",3,"click","matTooltip"],["mat-header-row",""],["mat-row","",1,"vehicle-row",3,"click"],[1,"mat-row"],["colspan","7",1,"mat-cell"]],template:function(i,l){if(i&1&&(n(0,"div",0)(1,"div",1)(2,"h1",2),r(3,"Vehicles Management"),o(),n(4,"div",3)(5,"button",4),_("click",function(){return l.createVehicle()}),n(6,"mat-icon"),r(7,"add"),o(),r(8," Create Vehicle "),o()()(),n(9,"mat-card",5)(10,"mat-card-content")(11,"form",6)(12,"div",7)(13,"mat-form-field",8)(14,"mat-label"),r(15,"Search"),o(),M(16,"input",9),m(17,De,3,0,"button",10),n(18,"mat-icon",11),r(19,"search"),o()()()()()(),m(20,Oe,2,0,"div",12)(21,Ke,27,7,"div",13),o()),i&2){let a;c(11),s("formGroup",l.searchForm),c(6),s("ngIf",(a=l.searchForm.get("searchTerm"))==null?null:a.value),c(3),s("ngIf",l.loading),c(),s("ngIf",!l.loading)}},dependencies:[D,P,J,G,$,j,Q,z,A,ke,_e,Ce,be,ve,ge,Se,xe,Me,we,Ve,ye,he,w,fe,ue,S,ee,Z,W,X,ie,te,re,oe,ne,le,ae,K,U,Y,me,ce,pe,de,F],styles:[".vehicles-container[_ngcontent-%COMP%]{padding:20px;background-color:#f5f5f5;min-height:100%}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:16px}}.page-title[_ngcontent-%COMP%]{font-size:24px;font-weight:500;color:#4a3c31;margin:0}.header-actions[_ngcontent-%COMP%]{display:flex;gap:12px}@media (max-width: 768px){.header-actions[_ngcontent-%COMP%]{width:100%;justify-content:space-between}}@media (max-width: 576px){.header-actions[_ngcontent-%COMP%]{flex-direction:column;width:100%}}.create-button[_ngcontent-%COMP%]{background-color:#c19a6b;color:#fff}.filter-card[_ngcontent-%COMP%]{margin-bottom:24px;border-radius:8px;box-shadow:0 2px 10px #0000001a}.filter-card[_ngcontent-%COMP%]   .mat-mdc-card-content[_ngcontent-%COMP%]{padding:16px}.filter-form[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px}.search-container[_ngcontent-%COMP%]{flex:1;display:flex;align-items:flex-start}.search-container[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:200px}.table-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 2px 10px #0000001a;overflow:hidden}.vehicles-table[_ngcontent-%COMP%]{width:100%}.vehicles-table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]{background-color:#f5f5f5;font-weight:500;color:#4a3c31;white-space:nowrap}.vehicles-table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{color:#333}.vehicles-table[_ngcontent-%COMP%]   .vehicle-row[_ngcontent-%COMP%]{cursor:pointer;transition:background-color .2s}.vehicles-table[_ngcontent-%COMP%]   .vehicle-row[_ngcontent-%COMP%]:hover{background-color:#c19a6b0d}.mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}.mat-mdc-paginator[_ngcontent-%COMP%]{background-color:#f5f5f5}"]})};export{Ee as VehiclesComponent};
