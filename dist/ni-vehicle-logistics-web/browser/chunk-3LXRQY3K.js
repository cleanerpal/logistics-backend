import{a as l}from"./chunk-M4BJXN77.js";import{fa as d,ga as f,ja as b,ka as g}from"./chunk-3O2P3FIP.js";import{aa as u,ga as m,t as p,u as a}from"./chunk-NXWLSP6D.js";import{a as r,b as s,g as c}from"./chunk-RA2WU32H.js";var v=class n{firebaseService=m(l);firestore=m(f);getAuditLogs(t){return this.firebaseService.getCollectionWithSnapshot("auditLogs",t).pipe(a(e=>e.map(i=>s(r({},i),{timestamp:i.timestamp instanceof Date?i.timestamp:new Date(i.timestamp.seconds*1e3)}))))}getAuditLogById(t){return this.firebaseService.getDocumentWithSnapshot("auditLogs",t).pipe(a(e=>e?s(r({},e),{timestamp:e.timestamp instanceof Date?e.timestamp:new Date(e.timestamp.seconds*1e3)}):null))}createAuditLog(t){return c(this,null,function*(){try{let e=yield p(this.firebaseService.user$.pipe(a(o=>o?{userId:o.uid,userName:o.displayName||o.email}:{userId:"unknown",userName:"Unknown User"}))),i=s(r(r({},t),e),{timestamp:d()}),L=g(this.firestore,"auditLogs");return(yield b(L,i)).id}catch(e){throw console.error("Error creating audit log:",e),e}})}static \u0275fac=function(e){return new(e||n)};static \u0275prov=u({token:n,factory:n.\u0275fac,providedIn:"root"})};export{v as a};
