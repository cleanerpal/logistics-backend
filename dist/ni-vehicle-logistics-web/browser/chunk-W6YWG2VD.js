import{a}from"./chunk-M4BJXN77.js";import{c as f}from"./chunk-4PPYA6ZN.js";import{J as c,W as m,aa as b,ga as t,p as l,u as i}from"./chunk-NXWLSP6D.js";var n=class o{firebaseService=t(a);getUserRole(){return this.firebaseService.user$.pipe(i(e=>e?.role||null))}hasRole(e){return this.getUserRole().pipe(i(r=>r?Array.isArray(e)?e.includes(r):e===r:!1))}isSuperAdmin(){return this.hasRole("SuperAdmin")}isAdmin(){return this.hasRole(["Admin","SuperAdmin"])}isDriver(){return this.hasRole("Driver")}static \u0275fac=function(r){return new(r||o)};static \u0275prov=b({token:o,factory:o.\u0275fac,providedIn:"root"})};var G=(o,e)=>{let r=t(a),v=t(n),p=t(f);return r.isAuthenticated().pipe(c(1),m(d=>{if(!d)return l(p.createUrlTree(["/login"],{queryParams:{returnUrl:e.url}}));let s=o.data.roles;return s&&s.length>0?v.getUserRole().pipe(i(u=>!u||!s.includes(u)?p.createUrlTree(["/dashboard"]):!0)):l(!0)}))};export{n as a,G as b};
