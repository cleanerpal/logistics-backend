<div class="addresses-container">
  <div class="page-header">
    <h1 class="page-title">{{ companyName }} - Addresses</h1>

    <div class="header-actions">
      <button
        mat-raised-button
        color="primary"
        class="add-button"
        (click)="addAddress()"
      >
        <mat-icon>add</mat-icon>
        Add Address
      </button>

      <button mat-stroked-button class="back-button" (click)="goBack()">
        <mat-icon>arrow_back</mat-icon>
        Back to Companies
      </button>
    </div>
  </div>

  <!-- Loading spinner -->
  <div class="loading-container" *ngIf="loading">
    <mat-spinner diameter="50"></mat-spinner>
  </div>

  <!-- Addresses list -->
  <div class="addresses-content" *ngIf="!loading">
    <mat-card class="addresses-card">
      <mat-card-header>
        <mat-card-title>Saved Addresses</mat-card-title>
        <mat-card-subtitle
          >Manage all addresses associated with this company</mat-card-subtitle
        >
      </mat-card-header>

      <mat-card-content>
        <div class="no-addresses-message" *ngIf="addresses.length === 0">
          <p>No addresses found for this company.</p>
          <button mat-raised-button color="primary" (click)="addAddress()">
            <mat-icon>add</mat-icon>
            Add Address
          </button>
        </div>

        <mat-list class="addresses-list" *ngIf="addresses.length > 0">
          <ng-container *ngFor="let address of addresses; let last = last">
            <div class="address-item">
              <div class="address-content">
                <div class="address-header">
                  <span class="address-type">{{ address.type }}</span>
                  <span class="default-badge" *ngIf="address.isDefault"
                    >Default</span
                  >
                </div>

                <div class="address-details">
                  {{ formatAddress(address) }}
                </div>
              </div>

              <div class="address-actions">
                <!-- Set as default button -->
                <button
                  mat-icon-button
                  color="primary"
                  (click)="setAsDefault(address.id)"
                  *ngIf="!address.isDefault"
                  matTooltip="Set as Default"
                >
                  <mat-icon>star_border</mat-icon>
                </button>

                <!-- Edit button -->
                <button
                  mat-icon-button
                  color="primary"
                  (click)="editAddress(address)"
                  matTooltip="Edit"
                >
                  <mat-icon>edit</mat-icon>
                </button>

                <!-- Delete button -->
                <button
                  mat-icon-button
                  color="warn"
                  (click)="deleteAddress(address.id)"
                  matTooltip="Delete"
                >
                  <mat-icon>delete</mat-icon>
                </button>
              </div>
            </div>

            <mat-divider *ngIf="!last"></mat-divider>
          </ng-container>
        </mat-list>
      </mat-card-content>
    </mat-card>
  </div>
</div>
