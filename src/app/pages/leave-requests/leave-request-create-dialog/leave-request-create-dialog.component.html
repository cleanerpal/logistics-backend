<div class="leave-create-dialog">
  <div class="dialog-header">
    <mat-icon>event_available</mat-icon>
    <h2 mat-dialog-title>Request Leave</h2>
  </div>

  <mat-dialog-content class="dialog-content">
    <div class="driver-info">
      <h3>Driver: {{ data.driverName }}</h3>
    </div>

    <form [formGroup]="leaveForm" class="leave-form">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Leave Type</mat-label>
        <mat-select formControlName="type" required>
          <mat-option *ngFor="let type of leaveTypes" [value]="type">
            {{ type }}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="leaveForm.get('type')?.hasError('required')">Leave type is required</mat-error>
      </mat-form-field>

      <div class="date-fields">
        <mat-form-field appearance="outline">
          <mat-label>Start Date</mat-label>
          <input matInput [matDatepicker]="startPicker" formControlName="startDate" required [min]="today" />
          <mat-hint>First day of leave</mat-hint>
          <mat-datepicker-toggle matIconSuffix [for]="startPicker"></mat-datepicker-toggle>
          <mat-datepicker #startPicker></mat-datepicker>
          <mat-error *ngIf="leaveForm.get('startDate')?.hasError('required')">Start date is required</mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>End Date</mat-label>
          <input matInput [matDatepicker]="endPicker" formControlName="endDate" required [min]="minEndDate" />
          <mat-hint>Last day of leave</mat-hint>
          <mat-datepicker-toggle matIconSuffix [for]="endPicker"></mat-datepicker-toggle>
          <mat-datepicker #endPicker></mat-datepicker>
          <mat-error *ngIf="leaveForm.get('endDate')?.hasError('required')">End date is required</mat-error>
        </mat-form-field>
      </div>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Notes (Optional)</mat-label>
        <textarea matInput formControlName="notes" rows="3" placeholder="Additional information about your leave request"></textarea>
      </mat-form-field>
    </form>

    <div class="notice-message">
      <mat-icon>info</mat-icon>
      <p>Your leave request will be pending until it's reviewed by management. You'll be notified when your request is processed.</p>
    </div>
  </mat-dialog-content>

  <mat-dialog-actions align="end" class="dialog-actions">
    <button mat-button class="cancel-button" (click)="onCancelClick()">Cancel</button>
    <button mat-flat-button color="primary" (click)="onSubmitClick()" [disabled]="leaveForm.invalid || isSubmitting">
      {{ isSubmitting ? 'Submitting...' : 'Submit Request' }}
    </button>
  </mat-dialog-actions>
</div>
